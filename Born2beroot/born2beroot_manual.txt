born2beroot라는 과제의 큰 틀은 “나의 첫 번째 서버를 설정할 수 있느냐” 이다.

따라서 이를 과제에 맞게 구현하기 위해 크게 5가지의 역량을 요구하고 있다.

5가지의 역량은 다음과 같다.

1. 과제에서 제시한 대로 cent os나 데비안을 virtualbox를 통해 실행시킬 수 있는가.
2. ssh와 ufw등 과제에서 제시한대로 나의 서버에 설정을 마칠 수 있는가.
3. 강력한 패스워드 정책을 설정할 수 있는가.
4. sudo 그룹에 대해 강력한 구성을 설정할 수 있는가.
5. 마지막으로 주어진 조건에 따른 monitoring.sh이라는 쉘스크립트를 작성할 수 있는가.

이를 수행하기 위해 세세한 항목들을 중심으로 다섯 가지 역량을 진행해보려 한다.

첫 번째, 과제에서 제시한 대로 cent os나 데비안을 virtualbox를 통해 실행시킬 수 있는가.

1. virtualbox는 cluster mac에서 앱스토어를 통해 설치할 수 없으므로 managed software center를 통해 설치한다.
2. cent os같은 경우 용량이 너무 크고, 서버를 처음 다루기에는 어려운 이슈가 있으므로 본 과제는 데비안으로 진행한다.
3. 과제에서는 데비안의 stable 최신버전을 이용하기를 요구하지만 현재 11버전의 경우 virtualbox와의 호환이 제대로 이루어지지 않으므로, stable 10버전을 이용하여 설치를 진행한다.
4. virtualbox의 new를 통해 데비안을 실행시키기 전에 주의해야할 점은 machine folder의 저장경로를 goinfre로 해야하는 것이다. 그렇지 않을 경우, 저장공간에 대한 문제가 일어날 수 있다.
5. 가상머신에서 사용할 크기는 적당히 추천 해주는 대로 설정하고, 가상디스크의 경우 virtualbox 전용 가상머신 이미지파일인 vdi를 선택한다. vdi는 다른 파일 없이도 현재 상태의 가상머신을 살릴 수 있다는 특징이 있다.
6. 저장 공간은 동적할당으로, 한계치는 8.0gb로 설정한다.
7. 디스크 이미지의 경우 debian stable 10버전 .iso를 설정해준다.
8. 설치창에서 제시하는 국가와 언어의 경우는 국가는 한국, 언어는 영어로 설정한다. (한글의 경우 깨짐 이슈가 있다.)
9. hostname은 과제에서 제시한대로 (intra id)42로 설정한다.
10. root password를 설정한다.
11. 가상 머신으로 작업할 때 사용할 계정,  id, password를 과제에서 제시한대로(intra id) 설정한다.
12. 과제에서 제시한대로 암호화된(encrypted) LVM(Logical Volumn Management)를 고른다.
13. 파치션을 분리하기 위해 seperate home partiton을 고른다.
14. 기존 드라이브를 LVM으로 분할 및 덮어쓰기, 그리고 사용하기 위해 yes를 고른다.
15. 암호화된 LVM에 대한 비밀번호를 설정한다.
16. LVM 분할 볼륨을 추천해준  8.1gb로 설정한다.
17. 이 후, 국가와 설정등을 설정해준 뒤, update, upgrade 및 프로그램 추가를 위한 미러사이트를 추천해준 대로 설정한다.
18. iso파일에는 핵심부분만 설치되어 있기 때문에 software selection의 경우 체크되어있는 부분을 추가로 설치한다. (ssh,standard system utilities)
19. grub(Grand Unified Bootloader)를 master boot record로 설정하는 것에 대해서는 서브젝트에 명시된것이 없기 때문에 no를 선택하여 설정하지 않는다.
20. 과제에 명시된 부트 경로 지정을 위해 manually로 설정하고, 이에 대해 과제에서 제시한대로 경로를 /dev/sda1로 설정해준다.
21. continue를 눌러 설치를 마무리한다.

**네 번째, sudo 그룹에 대해 강력한 구성을 설정할 수 있는가.**

sudo 적용

1. 먼저 su - 명령어를 통해 패스워드를 입력한 후 root계정으로 이동한다.
2. sudo가 설치되어 있는지 확인하기 위해 dpkg -l sudo를 입력하여 여부를 확인한다.
3. 설치되어 있지 않을 경우 apt install sudo 명령어를 통해 설치한다.
4. visudo 명령어를 통해 sudoer파일에 접근한다. (sudoer파일은 일반 vi 편집기로 접근하면 제약이 발생한다 따라서 /etc/sudoers 파일을 직접 편집하다가 실수가 발생하면 sudo를 사용할 수 없기에  visudo를 통해 편집한다.)
5. secure_path에 과제에서 제시한 대로 /snap/bin을 추가한다. ⇒ secure_path=”/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin”
6. Defaults와 주석 사이 아래 옵션들을 추가적으로 설정한다.
1. ctrl + x를 누르고 y를 눌러 저장한다. 만약 .tmp파일 등의 이름으로 저장관련하여 물어본다면, .tmp를 지우고 sudoers로 저장한다.
2. /var/log/sudo/00/00에서 log를 확인할 수 있다.

그룹 설정

1. 과제에서 제시한대로 user42그룹을 추가하기 위해 groupadd user42 명령어를 입력한다.
2. sudo와 user42 그룹에 유저를 추가하기 위해 usermod -aG sudo,user42 jaewopar  명령어를 통해 해당 그룹에 유저를 추가한다. (-a == append 그룹에 추가하는 기능 ,  -G== groups 지정한 그룹들에 유저를 추가하는 기능)
3. usermod -g user42 jaewopar 명령어를 통해 user42 그룹이 primary group이 되도록 한다. (-g == group ,G옵션과 달리 그룹 하나만 있을 때 사용하는 옵션)

- **tty란? teletypewriter, 즉, 표준 입력에 연결된 터미널의 파일 이름을 인쇄하는 유닉스 명령이다.**

- 컴퓨터를 조작할 때 사용하는 입출력 장치를 콘솔이라고 하고 명령조작에 사용하는 애플리케이션이나 OS자체를 콘솔 또는 콘솔애플리케이션이라고 하는데 보통 많은 사람들이 콘솔이라고 부른다. 또한 우리가 많이 사용하는 cmd도 콘솔이고 사용하는 터미널도 콘솔이다.
- tty도 콘솔의 한 종류로 Ctrl-Alt-F1 ~ F6 키조합으로 사용할수있는 OS 에서 제공하는 가상콘솔 이다. 실제 물리적인 장치가 연결된것이 아니기 때문에 커널에서 터미널을 emulation 한다. Line discipline, TTY driver 의 기능은 위와같고 마찬가지로 백그라운드 getty 프로세스에의해 login prompt 가 제공됩니다. /dev/tty[번호] 파일이 사용된다. TTY화면간 이동은 ALT+F1~F6이며 GUI환경 복귀는 ALT+F7이다.

- **sudoer란?**

- sudo 명령은 해당 명령을 잠시 다른 계정(주로 root)의 권한으로 실행하고자 할 때, 계정 전환 등의 절차 없이 유용하게 사용할 수 있는 명령이다. 다른 계정의 권한을 빌릴 수 있다는 말은 그 계정으로 할 수 있는 모든 일을 할 수 있다는 것을 의미하므로 사용시 유의해야 한다.

    보안상 상당히 위해가 될 수 있는 명령이기 때문에 리눅스 시스템에서는 모든 계정에게 sudo 명령을 사용할 수있는 권한을 부여하지 않고, sudoers라는 설정 파일을 통해 이 명령을 사용할 수 있는 계정의 범위를 한정한다.

- **secure_path란?**

- sudo명령 실행 시 현재 계정의 쉘이 아닌 새로운 쉘을 생성하고 그 안에서 명령을 실행하는데, 이 때 명령을 찾을 경로를 나열한 환경변수인 PATH값이 secure_path이다. 이는 트로이목마 해킹 공격에 대한 일차적인 방어 기능을 제공한다.
